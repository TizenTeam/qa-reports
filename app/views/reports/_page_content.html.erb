

<div class="page_content">

	<%= yield :notification_area %>	

    <%= yield :button_area %>
    
    <%= render :partial => 'editable_title' %>

    <%= yield :title || render(:partial => 'editable_title') %>

	<div class="report_head">
		<%= yield :table_of_contents %>

		<dl class="meta_info">
				<dt id="report_author">Author:</dt>
				<dd><%= @report.author.name%><br/>
                  <span class="un"><%= format_date_to_human_readable @report.created_at %></span>
                </dd>
				<dt>Last modified by:</dt>
				<dd><%= @report.editor.name %><br/>
                  <span class="un"><%= format_date_to_human_readable @report.updated_at %></span>
                </dd>
			     <%= render :partial => 'editable_date' %>
			    
			  		</dl>
	</div>
      <%= render :partial => 'editable_text', :locals => {:anchor => 'test_objective', :title => "Test Objective", :field => 'objective'} %>
      <%= render :partial => 'editable_text', :locals => {:anchor => 'build', :title => "Build (image)", :field => 'build'} %>
      <%= render :partial => 'editable_text', :locals => {:anchor => 'environment', :title => "Test Environment", :field => 'environment'} %>
      <%= render :partial => 'editable_text', :locals => {:anchor => 'qa_summary', :title => "Quality Summary", :field => 'qa_summary'} %>


   <%= render :partial => 'reports/test_results' %>


   <%= yield :result_edit_notification %>

      <h2 id="detailed_results">Detailed Test Results<span class="heading_actions"><%=back_to_top%></span></h2>

      <table id="functional_results" class="detailed_results">
        <thead>
			<tr>
			  <th id="th_test_case">Test case</th>
			  <th id="th_result">Result</th>
			  <th id="th_notes"><div style="position:relative;">Notes <span class="sort right"><a href="#" id="see_only_failed_button" class="sort_btn active">See only failed</a> <a href="#" id="see_all_button" class="sort_btn">See all</a></span></div></th>
        	</tr>
		</thead>

		<%= render :partial => "feature", :collection => @test_session.meego_test_sets %>

      </table>
    <!--  
   <h2 id="detailed_results">Non-functional Test Results<span class="heading_actions"><%=back_to_top%></span></h2>
      
	      
	    <table id="non-functional_results" class="detailed_results">
	      <thead>
				<tr>
				  <th id="th_nft_test_case">Test case</th>
				  <th class="th_measured">Measured</th>
				  <th class="th_target">Target</th>    
				  <th class="th_result">Result</th>  			  
				  <th class="th_to_target">% of target</th>      			  
				  <th id="th_notes"><div style="position:relative;">Notes <span class="sort"><a href="#" id="see_only_failed_button" class="sort_btn active">See only failed</a> <a href="#" id="see_all_button" class="sort_btn">See all</a></span></div></th>
	      	</tr>
			</thead>
			
			<tr class="feature_name">
				<td colspan="6">
			        Run time status/Settings/Control Panel (Dummy)
					<a href="#" class="see_all_toggle">+ see passing tests</a>
				</td>
			</tr>
			
		<tr class="testcase">
			<td class="testcase_name">How many watts per second?</td>
			<td class="testcase_result">5&nbsp;<span class="unit">W</span></td>
			<td class="testcase_target">38&nbsp;<span class="unit">W</span></td>   
			<td class="testcase_result fail">Fail</td>   			
			<td class="testcase_to_target">11&nbsp;<span class="unit">%</span></td>      			
			<td class="testcase_notes">Test case is not suitable for N900.</td>
		</tr>
	
	<tr class="feature_name">
		<td colspan="6">
	        Run time status/Settings/Control Panel (Dummy)
			<a href="#" class="see_all_toggle">+ see passing tests</a>
		</td>
	</tr>
	
<tr class="testcase">
	<td class="testcase_name">How many watts per second?</td>
	<td class="testcase_result">34&nbsp;<span class="unit">W</span></td>
	<td class="testcase_target">32&nbsp;<span class="unit">W</span></td>   
	<td class="testcase_result pass">Pass</td>   			
	<td class="testcase_to_target">108&nbsp;<span class="unit">%</span></td>      			
	<td class="testcase_notes">Test case is not suitable for N900.</td>
</tr>

<tr class="testcase">
	<td class="testcase_name">How many watts per second?</td>
	<td class="testcase_result">-</td>
	<td class="testcase_target">38&nbsp;<span class="unit">W</span></td>   
	<td class="testcase_result na">N/A</td>   			
	<td class="testcase_to_target">-</td>      			
	<td class="testcase_notes">Test case is not suitable for N900.</td>
</tr>
		
	    </table>-->
      
      
      <%= render :partial => 'editable_text', :locals => {:anchor => 'issue_summary', :title => "Issue Summary", :field => 'issue_summary'} %>

      <%= render :partial => 'reports/file_attachments' %>
	<%= yield :wizard_actions %>

</div>


<% content_for :category_dialog do %>
<div id="category-dialog" style="display:none;" class="jqmWindow">
	
	
  <%= form_for @test_session, :url=>{:action => "update_category"}, :html => {:id => 'upload_report'} do |f| %>
	    <h1>Change test category</h1> 
      <%= render :partial => 'shared/report_form', :object => f %>

	<% end %>
	
	<form>
	<div id="wizard_actions">
	  
			<input type="button" value="Cancel" class="dialog-cancel jqmClose"/>
			<input type="submit" value="Save" class="dialog-delete"/>
		
	</div>
	</form>
	</div>
<% end %>

<% content_for :view_specific_js do %>
<%= javascript_include_tag 'jqModal.js'%>
<script language="javascript" type="text/javascript">
$(document).ready(function(){
	$('#category-dialog').jqm({
		modal:true
	}).jqmAddTrigger('#test_category');

  $(".date").datepicker({
    showOn: "both",
    buttonImage: "/images/calendar_icon.png",
    buttonImageOnly: true,
    firstDay: 1,
    selectOtherMonths: true,
    dateFormat: "yy-mm-dd"
  });

  var myDate = new Date();
  var prettyDate = myDate.getUTCFullYear() + '-' + (myDate.getUTCMonth()+1) + '-' + myDate.getUTCDate();
  $(".date").val(prettyDate);

  activateSuggestionLinks("div.field");
  handleCategoryEdit("#category_dialog")
});
</script>



<% end %>
